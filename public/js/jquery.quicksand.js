/*

Quicksand 1.2.2

Reorder and filter items with a nice shuffling animation.

Copyright (c) 2010 Jacek Galanciak (razorjack.net) and agilope.com
Big thanks for Piotr Petrus (riddle.pl) for deep code review and wonderful docs & demos.

Dual licensed under the MIT and GPL version 2 licenses.
http://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt
http://github.com/jquery/jquery/blob/master/GPL-LICENSE.txt

Project site: http://razorjack.net/quicksand
Github site: http://github.com/razorjack/quicksand

Modified by DeMagician
*/
(function(a){a.fn.quicksand=function(h,c){var g=function(){a(this).children("div.portfolio-hover").fadeIn(100,"easeInOutCubic")};var b=function(){a(this).children("div.portfolio-hover").fadeOut(100,"easeInOutCubic")};var f={duration:400,easing:"swing",attribute:"data-id",adjustHeight:"auto",useScaling:false,enhancement:function(i){a("a.portfolio-item-link").hoverIntent({over:g,timeout:0,interval:0,sensitivity:10,out:b})},selector:"> *",dx:0,dy:0};a.extend(f,c);if(a.browser.msie||(typeof(a.fn.scale)=="undefined")){f.useScaling=false}var e;if(typeof(arguments[1])=="function"){var e=arguments[1]}else{if(typeof(arguments[2]=="function")){var e=arguments[2]}}return this.each(function(w){var B;var z=[];var l=a(h).clone();var A=a(this);var k=a(this).css("height");var q;var m=false;var n=a(A).offset();var o=[];var y=a(this).find(f.selector);if(a.browser.msie&&a.browser.version.substr(0,1)<7){A.html("").append(l);return}var p=0;var t=function(){if(!p){p=1;$toDelete=A.find("> *");A.prepend(u.find("> *"));$toDelete.remove();if(m){A.css("height",q)}f.enhancement(A);if(typeof e=="function"){e.call(this)}}};var x=A.offsetParent();var v=x.offset();if(x.css("position")=="relative"){if(x.get(0).nodeName.toLowerCase()=="body"){}else{v.top+=(parseFloat(x.css("border-top-width"))||0);v.left+=(parseFloat(x.css("border-left-width"))||0)}}else{v.top-=(parseFloat(x.css("border-top-width"))||0);v.left-=(parseFloat(x.css("border-left-width"))||0);v.top-=(parseFloat(x.css("margin-top"))||0);v.left-=(parseFloat(x.css("margin-left"))||0)}if(isNaN(v.left)){v.left=0}if(isNaN(v.top)){v.top=0}v.left-=f.dx;v.top-=f.dy;A.css("height",a(this).height());y.each(function(C){o[C]=a(this).offset()});a(this).stop();var s=0;var r=0;y.each(function(C){a(this).stop();var D=a(this).get(0);if(D.style.position=="absolute"){s=-f.dx;r=-f.dy}else{s=f.dx;r=f.dy}D.style.position="absolute";D.style.margin="0";D.style.top=(o[C].top-parseFloat(D.style.marginTop)-v.top+r)+"px";D.style.left=(o[C].left-parseFloat(D.style.marginLeft)-v.left+s)+"px"});var u=a(A).clone();var j=u.get(0);j.innerHTML="";j.setAttribute("id","");j.style.height="auto";j.style.width=A.width()+"px";u.append(l);u.insertBefore(A);u.css("opacity",0);j.style.zIndex=-1;j.style.margin="0";j.style.position="absolute";j.style.top=n.top-v.top+"px";j.style.left=n.left-v.left+"px";if(f.adjustHeight==="dynamic"){A.animate({height:u.height()},f.duration,f.easing)}else{if(f.adjustHeight==="auto"){q=u.height();if(parseFloat(k)<parseFloat(q)){A.css("height",q)}else{m=true}}}y.each(function(C){var D=[];if(typeof(f.attribute)=="function"){B=f.attribute(a(this));l.each(function(){if(f.attribute(this)==B){D=a(this);return false}})}else{D=l.filter("["+f.attribute+"="+a(this).attr(f.attribute)+"]")}if(D.length){if(!f.useScaling){z.push({element:a(this),animation:{top:D.offset().top-v.top,left:D.offset().left-v.left,opacity:1}})}else{z.push({element:a(this),animation:{top:D.offset().top-v.top,left:D.offset().left-v.left,opacity:1,scale:"1.0"}})}}else{if(!f.useScaling){z.push({element:a(this),animation:{opacity:"0.0"}})}else{z.push({element:a(this),animation:{opacity:"0.0",scale:"0.0"}})}}});l.each(function(E){var D=[];var G=[];if(typeof(f.attribute)=="function"){B=f.attribute(a(this));y.each(function(){if(f.attribute(this)==B){D=a(this);return false}});l.each(function(){if(f.attribute(this)==B){G=a(this);return false}})}else{D=y.filter("["+f.attribute+"="+a(this).attr(f.attribute)+"]");G=l.filter("["+f.attribute+"="+a(this).attr(f.attribute)+"]")}var F;if(D.length===0){if(!f.useScaling){F={opacity:"1.0"}}else{F={opacity:"1.0",scale:"1.0"}}d=G.clone();var C=d.get(0);C.style.position="absolute";C.style.margin="0";C.style.top=G.offset().top-v.top+"px";C.style.left=G.offset().left-v.left+"px";d.css("opacity",0);if(f.useScaling){d.css("transform","scale(0.0)")}d.appendTo(A);z.push({element:a(d),animation:F})}});u.remove();for(w=0;w<z.length;w++){z[w].element.animate(z[w].animation,f.duration,f.easing,t)}})}})(jQuery);